# 微机原理

微型计算机组成，使用原理原理

## 一. 概述

## 二. 结构的原理，作用

### 微型计算机系统

- 微型计算器
  - 微处理器
    - 算术逻辑单元(ALU)
    - 寄存器阵列(RA)
      - 工作寄存器
        - AX：累加器
        - BX：数据寄存器
        - CX：计数寄存器
        - DX：数据寄存器
        - SP：堆栈指针
        - BP：基数指针
        - SI：原变址寄存器
        - DI：目的变址寄存器
        - IP：指令指针
          - CS和IP都不能作目的操作数
        - PLAG：状态标志
          - 状态标志
            - 溢出标志(OF)：当符号数运算时，运算结果有溢出OF=1
            - 符号标志(SF)：运算结果最高位（符号位）为1，则SF=1
            - 零标志(ZF)：运算结果为0,ZF=1
            - 进位标志(CF)：运算时最高位有进位或者借位CF=1
            - 辅助进位标志(AF)：运算时，D3产生进位或者借位AF=1
            - 奇偶标志(PF)：运算结果低八位中“1”的个数为偶数PF=1
          - 控制标志
            - 方向标志(DF)：串指令中控制方向
            - 中断标志(IF)：IF=1允许终端，IF=0关中断
            - 跟踪标志(TF)：用于程序调试时进行单步方式工作
        - CS：代码段
          - CS和IP都不能作目的操作数
        - DS：数据段
        - SS：堆栈段
        - ES：附加段
      - 寄存器作用
        - 相当于存储单元，提高计算机功能，增强程序设计灵活性
        - 存储数据、地址、编程时用于置数和读数
    - 控制单元(CU)
  - 总线
    - 定义：连接计算机各部件的一组公共信线
    - 特点：大大减少传输线的数目，结构简单，便于扩充
    - 分类
      - 地址总线(AB)：单向总线，用来传输cpu发出的信息以确定存储器中信息存放的地址
      - 数据总线(DB)：双向总线，在cpu、存储器、I/O接口之间传输数据
      - 控制总线(CB)：双线总线，传送控制线好、时钟信号、状态信息
  - 存储器
    - ROM,PROM,EPROM
    - RAM
  - I/O电路
    - 串行I/O接口
    - 并行I/O接口
    - 定时器/计数器电路
  
  - 系统软件
  - 用户（应用软件）
  
- 电源

- I/O设备



## 三. 8086寻址方式与指令系统

### 3.1 8086寻址方式

- 立即寻址
  - `MOV	AL,26H`

- 寄存器间寻址
  - `MOV	DX,AX`

- 存储器间寻址

  1. 直接寻址
     - `MOV	AX,[2000H]`
  1. 寄存期间间接寻址
     - `MOV	BX,[SI]`
     - 用法：只能用基址寄存器和变址寄存器作目的操作数
  1. 寄存器相对寻址
     - `MOV	BX,COUNT[SI]`
  1. 基址变址寻址
     - `MO	AX,[BX][SI]`
     - 基址：BX,BP
     - 变址：DI,SI
     - 用法：必须是一个基址加一个变址，
  1. 相对基址变址寻址
     - `MOV	AX,MASK[BX][SI]`

### 3.3 8086 指令系统

#### 3.3.1 数据传送指令

- `MOV`：字节或字的传送

- `PUSH`：入栈指令
  - ​	先进后出
  
- `POP`：出栈指令

- `XCHG`：交换字或字节
  - 指令格式：`XCHG` 目的，源
  - 指令功能：把一个字或字节的的源操作数和目的操作数交换
  - 指令用法：交换可以在寄存期之间或寄存器与存储器之间进行，但段寄存器不能作为操作数，也不能直接交换两个存储期间内容
  
- `XLTA`：表转换
   - 指令格式：XLAT 转换表
   - 指令功能：将一个字节从一种格式转换成另一种格式
   - 指令用法：

- `IN`：输入
   - 指令格式：IN AL,端口地址或 IN AX,端口地址
   - 指令功能：
   
- `OUT`：输出

- `LEA`：装入有效地址

   - 指令格式：`LEA  REG,SRC`
   - 指令功能：将源操作数SRC的有效地址送到指定的寄存器中
   - 指令用法：
      1. 寄存器、 立即数和段寄存器都不能用作源操作数SRC
      2. REG只能使用规定的16位寄存器，不能使用段寄存器

   <img src="http://cdn.nidhogg-110.cn/typora/image-20221020093427762.png" alt="image-20221020093427762" style="zoom: 67%;" />

- `LDS`：装入数据段寄存器

- `LES`：装入附加段寄存器

- `LAHF`：标志寄存器低字节装入AH

- `SAHF`：AH装入标志寄存器低字节

- `PUSHF`：标志寄存器装入入栈指令

- `POPF`：出栈，并送入标志寄存器

<img src="http://cdn.nidhogg-110.cn/typora/image-20221020132141731.png" alt="image-20221020132141731" style="zoom:50%;" />

<img src="http://cdn.nidhogg-110.cn/typora/image-20221020132754441.png" alt="image-20221020132754441" style="zoom: 80%;" />

